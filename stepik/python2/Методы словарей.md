## Методы словарей

Словари как и списки имеют много полезных методов для упрощения работы с ними и решения повседневных задач. В прошлом уроке, мы уже познакомились с тремя словарными методами:

- метод `items()` – возвращает словарные пары `ключ: значение`, как соответствующие им кортежи;
- метод `keys()` – возвращает список ключей словаря;
- метод `values()` – возвращает список значений словаря.
### Добавление и изменение элементов в словаре

Чтобы изменить значение по определенному ключу в словаре, достаточно использовать индексацию вместе с оператором присваивания. При этом если ключ уже присутствует в словаре, его значение заменяется новым, если же ключ отсутствует, то в словарь будет добавлен новый элемент.

Приведенный ниже код:

```python
info = {'name': 'Sam',
        'age': 28,
        'job': 'Teacher'}

info['name'] = 'Timur'                    # изменяем значение по ключу name
info['email'] = 'timyr-guev@yandex.ru'    # добавляем в словарь элемент с ключом email

print(info)
```

выводит (порядок элементов может отличаться):

```no-highlight
{'name': 'Timur', 'age': 28, 'job': 'Teacher', 'email': 'timyr-guev@yandex.ru'}
```
**Решим следующую задачу:** пусть задан список чисел `numbers` , где некоторые числа встречаются неоднократно. Нужно узнать, сколько именно раз встречается каждое из чисел.

```python
numbers = [9, 8, 32, 1, 10, 1, 10, 23, 1, 4, 10, 4, 2, 2, 2, 2, 1, 10, 1, 2, 2, 32, 23, 23]
```

Следующий программный код, полностью решает поставленную задачу:

```python
numbers = [9, 8, 32, 1, 10, 1, 10, 23, 1, 4, 10, 4, 2, 2, 2, 2, 1, 10, 1, 2, 2, 32, 23, 23]

result = {}
for num in numbers:
    if num not in result:
        result[num] = 1
    else:
        result[num] += 1
```

### Метод get()
Для того, чтобы избежать возникновения ошибки в случае отсутствия ключа в словаре можно использовать метод `get()`, способный кроме ключа принимать и второй аргумент — значение, которое вернется, если заданного ключа нет. Когда второй аргумент не указан, то метод в случае отсутствия ключа возвращает None.

Приведенный ниже код:

```python
info = {'name': 'Bob',
        'age': 25,
        'job': 'Dev'}

item1 = info.get('salary')
item2 = info.get('salary', 'Информации о зарплате нет')

print(item1)
print(item2)
```

выводит:

```no-highlight
None
Информации о зарплате нет
```
### Метод update()

Метод `update()` – реализует своеобразную операцию конкатенации для словарей. Он объединяет ключи и значения одного словаря с ключами и значениями другого. При совпадении ключей в итоге сохранится значение словаря, указанного в качестве аргумента метода `update()`.

Приведенный ниже код:

```python
info1 = {'name': 'Bob',
        'age': 25,
        'job': 'Dev'}

info2 = {'age': 30,
        'city': 'New York',
        'email': 'bob@web.com'}

info1.update(info2)

print(info1)
```

выводит (порядок элементов может отличаться):

```no-highlight
{'name': 'Bob', 'age': 30, 'job': 'Dev', 'city': 'New York', 'email': 'bob@web.com'}
```

В Python 3.9 появились операторы `|` и `|=` которые реализуют операцию конкатенации словарей.

Приведенный ниже код:

```python
info1 = {'name': 'Bob',
        'age': 25,
        'job': 'Dev'}

info2 = {'age': 30,
        'city': 'New York',
        'email': 'bob@web.com'}

info1 |= info2

print(info1)
```

аналогичен предыдущему коду.
### Метод setdefault()

Метод `setdefault()` позволяет получить значение из словаря по заданному ключу, автоматически добавляя элемент словаря, если он отсутствует.

Метод принимает два аргумента:

-  `key`: ключ, значение по которому следует получить, если таковое имеется в словаре, либо создать.
-  `default`: значение, которое будет использовано при добавлении нового элемента в словарь.

В зависимости от значений параметров `key` и `default` возможны следующие сценарии работы данного метода.

**Сценарий 1.** Если ключ `key` присутствует в словаре, то метод возвращает значение по заданному ключу (независимо от того, передан параметр `default` или нет).

Приведенный ниже код:

```python
info = {'name': 'Bob',
        'age': 25}

name1 = info.setdefault('name')           # параметр default не задан           
name2 = info.setdefault('name', 'Max')    # параметр default задан

print(name1)
print(name2)
```

выводит:

```no-highlight
Bob
Bob
```

**Сценарий 2.** Если ключ `key` отсутствует в словаре, то метод вставляет переданное значение `default` по заданному ключу.

Приведенный ниже код:

```python
info = {'name': 'Bob',
        'age': 25}

job = info.setdefault('job', 'Dev')
print(info)
print(job)
```

выводит:

```no-highlight
{'name': 'Bob', 'age': 25, 'job': 'Dev'}
Dev
```

При этом если значение `default` не передано в метод, то вставится значение `None`.

Приведенный ниже код:

```python
info = {'name': 'Bob',
        'age': 25}

job = info.setdefault('job')
print(info)
print(job)
```

выводит:

```no-highlight
{'name': 'Bob', 'age': 25, 'job': None}
None
```
### Удаление элементов из словаря

Существует несколько способов удаления элементов из словаря:

- оператор `del`;
- метод `pop()`;
- метод `popitem()`;
- метод `clear()`.

### Оператор del

С помощью оператора `del` можно удалять элементы словаря по определенному ключу.

Следующий программный код:

```python
info = {'name': 'Sam',
        'age': 28,
        'job': 'Teacher',
        'email': 'timyr-guev@yandex.ru'}

del info['email']    # удаляем элемент имеющий ключ email
del info['job']      # удаляем элемент имеющий ключ job

print(info)
```

выводит (порядок элементов может отличаться):

```no-highlight
{'name': 'Sam', 'age': 28}
```
### Метод pop()

Оператор `del` удаляет из словаря элемент по заданному ключу вместе с его значением. Если требуется получить само значение удаляемого элемента, то нужен метод `pop()`.   

Следующий программный код:

```python
info = {'name': 'Sam',
        'age': 28,
        'job': 'Teacher',
        'email': 'timyr-guev@yandex.ru'}

email = info.pop('email')          # удаляем элемент по ключу email, возвращая его значение
job = info.pop('job')              # удаляем элемент по ключу job, возвращая его значение

print(email)
print(job)
print(info)
```

выводит:

```no-highlight
timyr-guev@yandex.ru
Teacher
{'name': 'Sam', 'age': 28}
```

Единственное отличие этого способа удаления от оператора `del` — он возвращает удаленное значение. В остальном этот способ идентичен оператору `del`. В частности, если удаляемого ключа в словаре нет, возникнет ошибка `KeyError`.
​Чтобы ошибка не появлялась, этому методу можно передать второй аргумент. Он будет возвращен, если указанного ключа в словаре нет. Это позволяет реализовать безопасное удаление элемента из словаря:

```python
surname = info.pop('surname', None) 
```

Если ключа `surname` в словаре нет, то в переменной `surname` будет храниться значение `None`.
### Метод popitem()

Метод `popitem()` удаляет из словаря **последний добавленный элемент** и возвращает удаляемый элемент в виде кортежа `(ключ, значение)`.

Следующий программный код:

```python
info = {'name': 'Bob',
     'age': 25,
     'job': 'Dev'}

info['surname'] = 'Sinclar'

item = info.popitem()

print(item)
print(info)
```

выводит:

```no-highlight
('surname', 'Sinclar')
{'name': 'Bob', 'age': 25, 'job': 'Dev'}
```

​В версиях Python ниже 3.6 метод `popitem()` удалял случайный элемент.
### Метод clear()

Метод `clear()` удаляет все элементы из словаря.

Следующий программный код:

```python
info = {'name': 'Bob',
        'age': 25,
        'job': 'Dev'}

info.clear()

print(info)
```

выведет:

```no-highlight
{}
```
### Метод copy()

Метод `copy()` создает **поверхностную** копию словаря.

Следующий программный код:

```python
info = {'name': 'Bob',
        'age': 25,
        'job': 'Dev'}

info_copy = info.copy()

print(info_copy)
```

выведет:

```no-highlight
{'name': 'Bob', 'age': 25, 'job': 'Dev'}
```

