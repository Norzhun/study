## Модуль turtle

Система черепашьей графики не встроена в интерпретатор Python и хранится в модуле `turtle`. В начале программы с использованием черепашьей графики пишут инструкцию импорта этого модуля:

```python
import turtle
```
### Рисование отрезков прямой

В результате команды `turtle.showturtle()` появляется графическое окно с черепашкой. Черепашка первоначально расположена в центре графического окна, "холста". Выглядит она как стрелка с острием на месте головы. Если дать черепашке команду двигаться вперед, она переместится в направлении, указываемом стрелкой.

Для перемещения черепашки вперед на n пикселей применяется команда `turtle.forward(n)`. Например, команда `turtle.forward(100)` переместит черепашку вперед на 100 пикселей.

Для перемещения черепашки назад на n пикселей применяется команда `turtle.backward(n)`. Например, команда `turtle.backward(250)` переместит черепашку назад на 250 пикселей.

### Поворот черепашки

Когда черепашка появляется, она по умолчанию направлена на восток, то есть вправо, или под углом 0∘0∘.

![](https://ucarecdn.com/c14520a7-7c7f-4b81-b739-082660019ac1/)

При помощи команд `turtle.right()` и `turtle.left()` можно повернуть черепашку:

- команда `turtle.right(angle)` поворачивает черепашку вправо на `angle` градусов;
- команда `turtle.left(angle)` поворачивает черепашку влево на `angle` градусов.
![[Pasted image 20231113231031.png]]
Рассмотрим программный код:

```python
import turtle

turtle.forward(100)
turtle.right(90)
turtle.forward(100)
```

Такой код перемещает черепашку на 100 пикселей вперед. Далее он поворачивает черепашку на 90∘ вправо (черепашка будет смотреть вниз). Затем он перемещает черепашку на 100 пикселей вперед.

### Установка углового направления черепашки

Команда `turtle.setheading()` применяется для установки углового направления черепашки с заданным углом. В качестве аргумента нужно указать желаемый угол.

Рассмотрим код:

```python
import turtle

turtle.forward(100)
turtle.setheading(90)

turtle.forward(100)
turtle.setheading(180)

turtle.forward(100)
turtle.setheading(270)

turtle.forward(100)
```

Первоначальное угловое направление черепашки составляет 0∘0∘. Далее установлено направление черепашки 90∘90∘ (на север). Затем установлено направление черепашки 180∘180∘ (на запад). Потом установлено направление черепашки 270∘270∘ (на юг).
### Получение текущего углового направления черепашки

Чтобы получить текущее угловое направление черепашки используется команда `turtle.heading()`.

Приведенный ниже код:

```python
import turtle

print(turtle.heading())
turtle.setheading(180)
print(turtle.heading())
```

поворачивает черепашку на запад и выводит:

```no-highlight
0.0
180.0
```
### Изменение внешнего вида черепашки

По умолчанию черепашка выглядит как стрелочка, но возможен и другой внешний вид. Для его изменения используют команду `shape()`. Команда принимает в качестве аргумента строковое название фигуры, определяющей форму черепашки. Доступные фигуры:

- square (квадрат);
- arrow (стрелка);
- circle (круг);
- turtle (черепашка);
- triangle (треугольник);
- classic (классическая стрелка).

```python
import turtle

turtle.shape('square')
turtle.forward(100)
turtle.setheading(90)

turtle.shape('arrow')
turtle.forward(100)
turtle.setheading(180)

turtle.shape('turtle')
turtle.forward(100)
turtle.setheading(270)

turtle.shape('circle')
turtle.forward(100)
```
При необходимости можно использовать собственные рисунки для создания внешнего вида черепашки.
``` python
import turtle

turtle.Screen().addshape('rocketship.gif')  # регистрируем изображение
turtle.shape('rocketship.gif')              # устанавливаем изображение
```
## Поднятие и опускание пера

Команда `turtle.penup()` поднимает перо, а команда `turtle.pendown()` – опускает. Когда перо поднято, черепашка перемещается не оставляя линии. Когда перо опущено, черепашка во время перемещения чертит линию. По умолчанию перо опущено.

Приведенный ниже код:

```python
import turtle

turtle.forward(50)
turtle.penup()
turtle.forward(25)
turtle.pendown()
turtle.forward(50)
turtle.penup()
turtle.forward(25)
turtle.pendown()
turtle.forward(50)
```
## Рисование кругов и точек

Чтобы черепашка нарисовала круг, можно применить команду `turtle.circle()`. Такая команда рисует круг заданного в виде аргумента в пикселях радиуса.

Например, команда `turtle.circle(80)` побуждает черепашку нарисовать круг с радиусом 80 пикселей.

Приведенный ниже код:

```python
import turtle

turtle.circle(80)
```
Команда `turtle.dot()` применяется, чтобы черепашка нарисовала точку.

Приведенный ниже код:

```python
import turtle

turtle.dot()
turtle.forward(50)

turtle.dot()
turtle.forward(50)
turtle.dot()
turtle.forward(50)
```

рисует три точки на одной прямой с расстоянием в 50 пикселей между ними.
## Изменение размера пера

Для изменения ширины пера черепашки в пикселях можно применить команду `turtle.pensize()`. Аргумент команды – целое число, задает ширину пера.

Приведенный ниже код устанавливает ширину пера в 55 пикселей и затем рисует круг:

```python
import turtle

turtle.pensize(5)
turtle.circle(80)
```
## Изменение цвета рисунка

Для изменения цвета рисунка можно применить команду `turtle.pencolor()`. Аргумент команды – строковое представление названия цвета.

Приведенный ниже код меняет цвет рисунка на красный и затем рисует круг:

```python
import turtle

turtle.pencolor('red')
turtle.circle(80)
```
С командой `turtle.pencolor()` можно использовать многочисленные предопределенные названия цветов. Наиболее широко используемые названия цветов:

- red (красный);
- green (зеленый);
- bluе (синий);
- yellow (желтый);
- cyan (сине-зелёный).

Команда `turtle.pencolor()` позволяет работать не только с предопределенными названиями цветов, но и с цветами, заданными в формате RGB (Red Green Blue). В качестве аргумента команды `turtle.pencolor()` можно использовать либо кортеж из 33 чисел `(r, g, b)`, либо просто три числа `r, g, b`.
```python
import turtle

turtle.pencolor('red')           #  строковое представление цвета
turtle.circle(90)

color = (13, 56, 240)            #  кортеж (r, g, b)

turtle.pencolor(color)           #  кортеж в качестве аргумента
turtle.circle(80)

turtle.pencolor(130, 240, 200)   #  значения r, g, b в качестве аргументов
turtle.circle(50)
```
## Изменение цвета фона

Для изменения фонового цвета графического окна можно применить команду `turtle.Screen().bgcolor()`. В этом случае тоже можно использовать цвета с предопределенными названиями или задать цвет в RGB формате.

Приведенный ниже код меняет цвет фона на серый, цвет рисунка на зеленый и затем рисует круг:

```python
import turtle

turtle.Screen().bgcolor('gray')
turtle.pencolor('green')
turtle.circle(80)
```
Мы также можем установить фоновое изображение с помощью команды `turtle.Screen().bgpic()`.
```python

import turtle

turtle.Screen().setup(400, 400)               # устанавливаем размер граф. окна
turtle.Screen().addshape('rocketship.png')    # добавляем форму черепашки

turtle.Screen().bgpic('space.jpg')            # устанавливаем фоновое изображение
turtle.shape('rocketship.png')                # устанавливаем форму черепашки
turtle.pencolor('green')
turtle.pensize(5)

for _ in range(4):
  turtle.forward(150)
  turtle.left(90)
  ```
  ## Создание штампа

С помощью команды `turtle.stamp()` можно оставить штамп черепашки. Использование команды `turtle.stamp()` производит тот же эффект, что и команда `turtle.dot()`, но оставляет отметку в форме черепашки.

Приведенный ниже код:

```python
import turtle

turtle.shape('turtle')

for i in range(3):
    turtle.forward(50)
    turtle.stamp()
```

создает следующий рисунок:

![](https://ucarecdn.com/e87207a6-d8a2-44d6-a432-04760d1bb7e7/)

При использовании команды `turtle.stamp()` цветом штампа будет цвет заливки или по умолчанию черный.
## Возвращение экрана в исходное состояние

Для возвращения графического окна черепашки в исходное состояние существуют три команды:

- `turtle.clear()`;
- `turtle.reset()`;
- `turtle.clearscreen()`.

Команда `turtle.clear()` стирает все рисунки в графическом окне. Но не меняет положение черепашки, цвет рисунка и цвет фона графического окна.

Команда `turtle.reset()` стирает все рисунки, имеющиеся в графическом окне, задает черный цвет рисунка и возвращает черепашку в исходное положение в центре экрана. Эта команда не переустанавливает цвет фона графического окна.

Команда `turtle.clearscreen()` стирает все рисунки в графическом окне, меняет цвет рисунка на черный, а цвет фона на белый, и возвращает черепашку в исходное положение в центре графического окна.
## Примечания

**Примечание 1.** Для установления размера графического окна можно применить команду `turtle.Screen().setup()`. Аргументы команды – ширина и высота (в пикселях).

Приведенный ниже код создает графическое окно шириной 640×480640×480 пикселей:

```python
import turtle
turtle.Screen().setup(640, 480)
```
## Перемещение черепашки в заданную позицию

Для идентификации позиции каждого пикселя в графическом окне черепашки используется прямоугольная Декартова система координат. Каждый пиксель имеет координаты x и y. Координата x показывает горизонтальную позицию пикселя, координата y – вертикальную.

![](https://ucarecdn.com/027aa4cf-e420-4821-b4f8-fd1ec845cbe5/)

Важно помнить:

- пиксель в центре графического окна находится в позиции (0;0), его координаты x и y равны 00;
- значения координат x увеличиваются при перемещении вправо и уменьшаются влево;
- значения координат y увеличиваются при перемещении вверх и уменьшаются вниз;
- пиксели, расположенные справа от центральной точки, имеют положительные координаты x, а расположенные слева от центральной точки – отрицательные координаты x;
- пиксели, расположенные выше центральной точки, имеют положительные координаты y, а расположенные ниже центральной точки – отрицательные координаты y.

Для перемещения черепашки в конкретную позицию в графическом окне применяется команда `turtle.goto()`. Аргументами служат координаты целевой позиции. Если перо черепашки опущено вниз (по умолчанию оно опущено), то будет начерчена линия. Приведенный ниже код:

```python
import turtle

turtle.goto(0, 100)
turtle.goto(-100, 0)
turtle.goto(0, 0)
```
нарисует прямоугольный треугольник с катетами по 100 пикселей.
Команды `turtle.setposition()` и `turtle.setpos()` аналогичны команде `turtle.goto()`. Все три команды перемещают черепашку в заданную позицию.
## Получение текущей позиции черепашки

Команда `turtle.pos()` возвращает кортеж с x и y координатами черепашки.

Приведенный ниже код:

```python
import turtle

turtle.goto(100, 150)
position = turtle.pos()
print(position)
```

перемещает черепашку из позиции (0;0)(0;0) в позицию (100;150)(100;150) и выводит:

```no-highlight
(100.00, 150.00)
```

Для получения только координаты x черепашки служит команда `turtle.xcor()`, а для получения координаты y – команда `turtle.ycor()`.

Приведенный ниже код:

```python
import turtle

turtle.goto(200, -150)
x = turtle.xcor()
y = turtle.ycor()
print(x)
print(y)
```

перемещает черепашку из позиции (0;0) в позицию (200;−150) и выводит:

```no-highlight
200
-150
```
## Сокрытие черепашки

Когда не нужно, чтобы черепашка отображалась на экране, применяется команда `turtle.hideturtle()`, которая ее прячет. Эта команда не изменяет процесс создания графического изображения, она просто скрывает значок черепашки. Когда требуется снова вывести черепашку на экран, применяется команда `turtle.showturtle()`.

## Управление скоростью анимации черепахи

Для изменения скорости движения черепашки можно применить команду `turtle.speed()`. Аргумент команды скорость – число в диапазоне от 0 до 10. Если указать 0, то черепашка будет делать все свои перемещения мгновенно (анимация отключена).

Приведенный ниже код:

```python
import turtle

turtle.speed(0)
turtle.circle(50)
```

отключает анимацию черепашки и в графическом окне мгновенно появляется окружность.
В диапазоне от 1 до 10 самая малая скорость – 1 , а самая большая – 10 .

Приведенный ниже код:

```python
import turtle

for i in range(1, 11):
    turtle.speed(i)
    turtle.circle(100 - 10*i)
```

устанавливает скорость анимации 1 (самую медленную), затем 2, затем 3 и т.д и рисует круги.
## Вывод текста в графическое окно

Для вывода текста в графическое окно применяется команда `write()`. Аргумент этой команды — строка текста, которую требуется вывести на экран. Левый нижний угол первого символа выведенного текста будет расположен в точке с координатами черепашки.

Приведенный ниже код:

```python
import turtle

turtle.write('Пpивeт, мир!')
```

выводит текст `Привет, мир!` на экран.
Мы можем настроить вывод текста, задавая размер и тип шрифта, начертание, выравнивание и т.д.

Аргументы команды `write()`:

- `arg` – текст, который нужно вывести;
- `move` – указывает будет ли двигаться черепашка по мере рисования надписи (по умолчанию значение `False`);
- `align` – служит для выравнивания надписи относительно черепашки, может принимать три строковых значения `right, center, left` (по умолчанию значению `right`);
- `font` – кортеж из трех значений: `(название шрифта, размер шрифта, тип начертания)`. В качестве начертания можно использовать строковые значения: `normal` — обычный, `bold` — полужирный, `italic` — курсив, или объединить два последних, тогда текст будет напечатан полужирным курсивом.
![[Pasted image 20231115222817.png]]
## Заполнение геометрических фигур

Для заполнения геометрической фигуры цветом используется команда `turtle.begin_fill()`, причем она применяется до начертания фигуры, а после завершения начертания используется команда `turtle.end_fill()` и геометрическая фигура заполняется текущим цветом заливки.

Приведенный ниже код:

```python
import turtle

turtle.hideturtle()
turtle.begin_fill()     # включаем заливку
turtle.circle(80)
turtle.end_fill()       # выключаем заливку
```

рисует круг, заполненный цветом по умолчанию — черным.

Цвет заливки можно изменить при помощи команды `fillcolor()`. Аргумент команды — название цвета в виде строкового литерала, либо значения трех компонентов RGB.

Приведенный ниже код:

```python
import turtle

turtle.hideturtle()
turtle.fillcolor('red')
turtle.begin_fill()
turtle.circle(80)
turtle.end_fill()
```

изменяет цвет рисунка на красный и рисует круг.

Если заполнить незамкнутую фигуру, она будет закрашена, будто был начерчен отрезок, соединяющий начальную и конечную точки.

## Создание нескольких черепашек

Можно работать сразу с несколькими черепашками. Для этого надо создать несколько переменных, содержащих экземпляры класса `Turtle`.
```python
```import turtle
turtle.Screen().bgcolor('yellow')  #  устанавливаем цвет фона

tim = turtle.Turtle()    # создаем первую черепашку и устанавливаем ее свойства
tim.color('red')
tim.pensize(3)
tim.forward(80)
tim.left(120)
tim.forward(80)
tim.left(120)
tim.forward(80)
tim.left(120)
tim.right(180)
tim.forward(80)


alex = turtle.Turtle()    # создаем вторую черепашку и устанавливаем ее свойства
alex.forward(50)
alex.left(90)
alex.forward(50)
alex.left(90)
alex.forward(50)
alex.left(90)
alex.forward(50)
alex.left(90)
```
## Отслеживание нажатия клавиш

Черепашья графика позволяет отслеживать происходящие события, такие как нажатия клавиш клавиатуры, перемещение мышки или нажатие на мышку. Изначально программа никак не реагирует на эти события и чтобы это поведение изменить необходимо привязать функции обратного вызова к событиям. Для этого существуют специальные команды. Для отслеживания нажатия клавиш клавиатуры используется команда `onkey(fun, key)`, которая связывает функцию обратного вызова `fun` с событием нажатия клавиши `key`.
```python
import turtle

def move_up():                            # функция обратного вызова
  x, y = turtle.pos()
  turtle.setposition(x, y + 5)
  
def move_down():                          # функция обратного вызова
  x, y = turtle.pos()
  turtle.setposition(x, y - 5)
  
def move_left():                          # функция обратного вызова
  x, y = turtle.pos()
  turtle.setposition(x - 5, y)

def move_right():                         # функция обратного вызова
  x, y = turtle.pos()
  turtle.setposition(x + 5, y)

turtle.showturtle()                        # отображаем черепашку
turtle.pensize(3)                          # устанавливаем размер пера
turtle.shape('turtle')
turtle.Screen().listen()                   # устанавливаем фокус на экран черепашки

turtle.Screen().onkey(move_up, 'Up')       # регистрируем функцию на нажатие клавиши наверх
turtle.Screen().onkey(move_down, 'Down')   # регистрируем функцию на нажатие клавиши вниз
turtle.Screen().onkey(move_left, 'Left')   # регистрируем функцию на нажатие клавиши налево
turtle.Screen().onkey(move_right, 'Right') # регистрируем функцию на нажатие клавиши направо
```
Для отслеживания событий также необходимо установить фокус на экран черепашки с помощью команды `turtle.Screen().listen()`.

Давайте теперь сделаем так, чтобы по нажатию на пробел черепашка скрывалась и переставала оставлять след. Также добавим возможность увеличивать скорость перемещения черепашки по нажатию на клавиши клавиатуры `q` и `w`.
```python
import turtle

speed = 5
def move_up():                             # функция обратного вызова
  x, y = turtle.pos()
  turtle.setposition(x, y + speed)
  
def move_down():                           # функция обратного вызова
  x, y = turtle.pos()
  turtle.setposition(x, y - speed)

def move_left():                           # функция обратного вызова
  x, y = turtle.pos()
  turtle.setposition(x - speed, y)

def move_right():                          # функция обратного вызова
  x, y = turtle.pos()
  turtle.setposition(x + speed, y)
  
def change():                              # функция обратного вызова
  if turtle.isvisible():
    turtle.up()
    turtle.hideturtle()
  else:
    turtle.down()
    turtle.showturtle()
    
def speed_increase():                      # функция обратного вызова
  global speed
  speed += 1

def speed_decrease():                      # функция обратного вызова
  global speed
  speed -= 1

turtle.showturtle()                        # отображаем черепашку
turtle.pensize(3)                          # устанавливаем размер пера
turtle.Screen().listen()                   # устанавливаем фокус на экран черепашки

turtle.Screen().onkey(move_up, 'Up')       # регистрируем функцию на нажатие клавиши наверх
turtle.Screen().onkey(move_down, 'Down')   # регистрируем функцию на нажатие клавиши вниз
turtle.Screen().onkey(move_left, 'Left')   # регистрируем функцию на нажатие клавиши налево
turtle.Screen().onkey(move_right, 'Right') # регистрируем функцию на нажатие клавиши направо
turtle.Screen().onkey(change, 'space')
turtle.Screen().onkey(speed_increase, 'q')
turtle.Screen().onkey(speed_decrease, 'w')
```
## Отслеживание нажатия мыши

Аналогичным образом можно отслеживать нажатие на мышку. Для отслеживания нажатия мыши используется команда `onclick(fun)`, которая связывает функцию обратного вызова `fun` с событием нажатия левой кнопки мыши.

Приведенный ниже код рисует круг по нажатию на левую кнопку мыши.
```python
import turtle
from random import randrange

def random_color():
  return randrange(256), randrange(256), randrange(256) 

def draw_circle(x, y, r):
    turtle.penup()
    turtle.goto(x, y - r)
    turtle.pendown()
    color = random_color()
    turtle.pencolor(color)
    turtle.fillcolor(color)
    turtle.begin_fill()
    turtle.circle(r)
    turtle.end_fill()
    turtle.speed(0)

def left_mouse_click(x, y):
    draw_circle(x, y, 10)

turtle.hideturtle()

turtle.Screen().onclick(left_mouse_click)
turtle.Screen().listen()
```